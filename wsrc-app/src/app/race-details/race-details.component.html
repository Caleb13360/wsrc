<!-- Banner -->
<div class="flex-grow bg-cDarkBlue pt-20 sm:pt-24 md:pt-32 lg:pt-36 text-cWhite font-roboto tracking-tighter">
<div class="w-full bg-cover bg-center " style="background-image: url('lambo1.jpg');">
    <div class="relative h-full bg-black bg-opacity-30">

        <!-- Centered content -->
        <div class="flex items-center justify-center h-full">
            <div class="text-center py-16 md:py-24 md:px-40">
                <span class="block text-cWhite font-roboto text-2xl md:text-3xl tracking-tighter">This race begins
                    in</span>
                <div class="flex items-center space-x-2 mt-4">
                    <!-- Days -->
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">{{countdown.days}}</span>
                        <span class="text-md md:text-2xl font-roboto">Days</span>
                    </div>
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">:</span>
                        <span>.</span>
                    </div>
                    <!-- Hours -->
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">{{countdown.hours}}</span>
                        <span class="text-md md:text-2xl font-roboto">Hours</span>
                    </div>
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">:</span>
                        <span>.</span>
                    </div>
                    <!-- Minutes -->
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">{{countdown.minutes}}</span>
                        <span class="text-md md:text-2xl font-roboto">Minutes</span>
                    </div>
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">:</span>
                        <span>.</span>
                    </div>
                    <!-- Seconds -->
                    <div class="flex flex-col items-center text-cWhite tracking-tighter">
                        <span class="text-6xl md:text-10xl font-bold font-roboto-condensed leading-none">{{countdown.seconds}}</span>
                        <span class="text-md md:text-2xl font-roboto">Seconds</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Race Name -->
<div
    class="flex flex-col lg:flex-row justify-between items-center p-4 lg:mx-52 bg-cDarkBlue text-cWhite lg:pr-8 lg:pt-16">
    <div class="text-center lg:text-left">
        <span class="text-4xl lg:text-5xl mb-6 font-roboto-condensed tracking-tighter font-bold">{{ race ? (race.race_name) : '???' }}</span>
    </div>
    <div class="mt-4 lg:mt-0">
        <button routerLink="/checkout"
            class="w-full lg:w-auto bg-cBlue text-white text-2xl font-roboto-condensed tracking-tighter px-14 py-2 rounded-sm hover:px-20 hover:bg-cWhite hover:text-cBlack duration-200 transition-all ease-linear font-bold">
            Sign-Up for Race (18/{{ race ? (race.max_racers) : '?' }})
        </button>
    </div>
</div>

<!-- Race Details -->
<div class="flex flex-col lg:flex-row justify-between px-4 lg:px-8 xl:mx-52">
    <!-- Track -->
    <div class="w-full lg:w-1/2 pt-6 lg:pt-12">
        <div class="mb-4 border border-cBorderGrey bg-cDarkBlue">
            <img src="RudskogenTrack.PNG" alt="Track Image" class="w-full h-auto">
            <div class="flex items-center m-2 text-cDarkGrey">
                <mat-icon>flag</mat-icon>
                <h2 class="text-md md:text-xl ml-1">{{ race ? (race.track_name) : '???' }} - {{ race ? (race.track_config) : '???' }}</h2>
            </div>
        </div>

        <!-- Weather -->
    <div class="flex justify-between mb-4 border border-cBorderGrey bg-cDarkBlue">
        <!-- First Column: Temperature -->
        <div class="flex flex-col items-center justify-center leading-none p-5">
    
            <span class="text-cDarkGrey text-4xl xl:text-6xl mb-6 font-roboto tracking-tighter font-bold">{{ race ? (race.temperature) : '??' }}Â°C</span>
            <span class="text-cDarkGrey text-1xl">{{ race ? (race.cloud_cover) : '??' }}</span>
        </div>
        <!-- Second Column: Weather Descriptors -->
        <div class="flex flex-col items-start p-5 justify-center text-cDarkGrey">
                        <span>Track Moisture</span>
            <span>Humidity</span>
            <span>Wind Speed</span>
            <span>Wind Direction</span>
        </div>
        <div class="flex flex-col items-start p-5 justify-center text-cDarkGrey font-bold">
            
            <span>{{ race ? (race.track_moisture) : '? ' }}</span>
            <span>{{ race ? (race.humidity) : '? ' }}%</span>
            <span>{{ race ? (race.wind_speed) : '? ' }}kph</span>
            <span>{{ race ? (race.wind_direction) : '? ' }}</span>
        </div>
    </div>

        <!-- Race Setup -->
        <div class="border border-cBorderGrey bg-cDarkBlue">
            <div class="flex flex-wrap justify-between p-5 gap-4 lg:gap-0">
                <div class="flex items-center text-[#62D1CC]">
                    <mat-icon>access_time</mat-icon>
                    <span class="ml-1 font-bold">{{ race ? (race.race_time) : '???' }} Min Race</span>
                </div>
                <div class="flex items-center text-[#FBE057]">
                    <mat-icon>play_arrow</mat-icon>
                    <span class="ml-1 font-bold">{{ race ? (race.qualifier_laps) : '?' }} Quali Laps</span>
                </div>
                <div class="flex items-center text-[#FFA366]">
                    <mat-icon>lock</mat-icon>
                    <span class="ml-1 font-bold">Fixed Setup</span>
                </div>
                <div class="flex items-center text-cGreen">
                    <mat-icon>attach_money</mat-icon>
                    <span class=" font-bold">{{ race ? ('P1 - P'+race.cash_split.length.toString()) : '???' }}</span>
                </div>
            </div>
            <!-- Race Information -->
        <div class="flex flex-col items-start p-5 space-y-2 text-cDarkGrey">
            <div class="flex items-center space-x-2">
                <mat-icon>access_time</mat-icon>
                <span>{{ race ? (race.launch_time | date: 'h:mm a') : '???' }} Race Start on {{ race ? (race.launch_time | date: 'MMMM d, y') : '???' }}</span>
            </div>
            <div class="flex items-center space-x-2">
                <mat-icon>flag</mat-icon>
                <span>{{ race ? (race.track_name) : '???' }}</span>
            </div>
            <div class="flex items-center space-x-2">
                <mat-icon>directions_car</mat-icon>
                <span>{{ race ? (race.car) : '???' }}</span>
            </div>
        </div>
        </div>
    </div>

    <!-- Average Times for Mobile-->
    <div class=" py-4 xl:mx-56 block lg:hidden">
        <div class="py-6 flex flex-col lg:flex-row border border-cBorderGrey bg-cDarkBlue">
            <!-- Average Lap Time -->
            <div class="flex flex-col items-center w-full lg:w-1/2 mb-6 lg:mb-0">
                <span class="text-cGrey text-xl text-center">Average Lap Time of Last Race in Same Conditions</span>
                <span class="text-cGrey text-3xl lg:text-[2.5rem] font-bold pt-1">1:33.791</span>
            </div>
            <!-- Fastest Lap Time -->
            <div class="flex flex-col items-center w-full lg:w-1/2">
                <span class="text-cGrey text-xl text-center">Fastest Lap Time of Last Race in Same Conditions</span>
                <span class="text-cGrey text-3xl lg:text-[2.5rem] font-bold pt-1">1:29.520</span>
            </div>
        </div>
    </div>

    <!-- Prize Pool -->
<div class=" w-full lg:w-1/2 flex flex-col justify-center items-center  space-y-3 pl:0 lg:pl-8 pt-2 sm:pt-12">
    <div class="flex flex-col items-center mb-6">
        <span class="text-2xl font-roboto-condensed tracking-tighter leading-none">Total Prize Pool</span>
        <span class="text-6xl font-roboto-condensed tracking-tighter font-bold text-center mt-4">${{ race ? ((race.entry_fee) * (race.max_racers) * 0.5) : '???' }} USD</span>
    </div>
    <div class="border border-cGreen bg-cGreen w-full h-16 flex items-center justify-between px-4 rounded-sm ">
        <span class="text-cDarkBlue font-roboto tracking-tighter">1st</span>
        <span class="text-cDarkBlue mx-auto font-roboto tracking-tighter font-bold text-3xl">${{ race ? ((race.entry_fee) * (race.max_racers) * 0.5 * race.cash_split[0]) : '???' }} USD</span>
    </div>
    <div
        class="border border-cGreen w-full h-16 flex items-center justify-between px-4 rounded-sm group hover:bg-cGreen transition-all duration-200 ease-linear">
        <span class="text-cGreen font-roboto tracking-tighter group-hover:text-cBlack">2nd</span>
        <span class="text-cGreen mx-auto font-roboto tracking-tighter font-bold text-3xl group-hover:text-cBlack ">${{ race ? ((race.entry_fee) * (race.max_racers) * 0.5 * race.cash_split[1]) : '???' }} USD</span>
    </div>
    <div
        class="border border-cGreen w-full h-16 flex items-center justify-between px-4 rounded-sm group hover:bg-cGreen transition-all duration-200 ease-linear">
        <span class="text-cGreen font-roboto tracking-tighter group-hover:text-cBlack">3rd</span>
        <span class="text-cGreen mx-auto font-roboto tracking-tighter font-bold text-3xl group-hover:text-cBlack">${{ race ? ((race.entry_fee) * (race.max_racers) * 0.5 * race.cash_split[2]) : '???' }} USD</span>
    </div>
    <div routerLink="/events/RPRewards"
        class="border border-cBorderGrey w-full h-16 flex items-center justify-between px-4 rounded-sm group hover:bg-cOrange hover:border-cOrange transition-all duration-200 ease-linear">
        <span class="text-cGrey font-roboto tracking-tighter group-hover:text-cBlack">4th</span>
        <span class="text-cGrey mx-auto font-roboto tracking-tighter font-bold text-3xl group-hover:text-cBlack">{{ race ? (race.racer_points[3]) : '???' }} RP</span>
    </div>
    <div routerLink="/events/RPRewards"
        class="border border-cBorderGrey w-full h-16 flex items-center justify-between px-4 rounded-sm group hover:bg-cOrange hover:border-cOrange transition-all duration-200 ease-linear">
        <span class="text-cGrey font-roboto tracking-tighter group-hover:text-cBlack">5th</span>
        <span class="text-cGrey mx-auto font-roboto tracking-tighter font-bold text-3xl group-hover:text-cBlack">{{ race ? (race.racer_points[4]) : '???' }} RPP</span>
    </div>
    <div routerLink="/events/RPRewards"
        class="border border-cBorderGrey w-full h-16 flex items-center justify-between px-4 rounded-sm group hover:bg-cOrange hover:border-cOrange transition-all duration-200 ease-linear">
        <span class="text-cGrey font-roboto tracking-tighter group-hover:text-cBlack">6th</span>
        <span class="text-cGrey mx-auto font-roboto tracking-tighter font-bold text-3xl group-hover:text-cBlack">{{ race ? (race.racer_points[5]) : '???' }} RP</span>
    </div>
    <p class="text-cDarkGrey mt-4">If all racers are present in the race, the below prizes will be awarded, if less
        racers are present it will scale accordingly.</p>

</div>
</div>

<!-- Average Times -->
<div class="p-4 xl:mx-56 hidden lg:block">
    <div class="py-6 flex flex-col lg:flex-row border border-cBorderGrey bg-cDarkBlue">
        <!-- Average Lap Time -->
        <div class="flex flex-col items-center w-full lg:w-1/2 mb-6 lg:mb-0">
            <span class="text-cGrey text-xl text-center">Average Lap Time of Last Race in Same Conditions</span>
            <span class="text-cGrey text-3xl lg:text-[2.5rem] font-bold pt-1">1:33.791</span>
        </div>
        <!-- Fastest Lap Time -->
        <div class="flex flex-col items-center w-full lg:w-1/2">
            <span class="text-cGrey text-xl text-center">Fastest Lap Time of Last Race in Same Conditions</span>
            <span class="text-cGrey text-3xl lg:text-[2.5rem] font-bold pt-1">1:29.520</span>
        </div>
    </div>
</div>


<!-- Participants -->
<div class="p-6 w-full ">
    <!-- Header and Sub-header -->
    
    <div class="flex justify-between items-center mb-6 mt-4 mx-0 lg:mx-52">
        <div>
            <h1 class="text-5xl mb-2 font-roboto-condensed tracking-tighter font-bold ">Race Participants</h1>
            <h2 class="text-cWhite text-lg md:text-2xl mb-4 font-roboto-condensed tracking-tighterl">All the racers who have registered are shown below.</h2>
        </div>
        <span class="text-2xl">18/ {{race ? (race.max_racers) : "?"}} Racers</span>
    </div>
<!-- Table Mobile -->
<div class="overflow-x-auto mx-4 sm:mx-8 lg:hidden">
    <table class="min-w-full bg-cDarkBlue">
        <thead class="border border-cBorderGrey bg-cDarkBlue">
            <tr>
                <th class="py-2 px-4 text-center">No.</th>
                <th class="py-2 px-4 text-center">Racer</th>
                <th class="py-2 px-4 text-center">Country</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let racer of racers; let i = index" [ngClass]="{'bg-gray-800': i % 2 === 1}">
                <td class="py-2 px-4 text-center">{{ i + 1 }}</td>
                <td class="py-2 px-4 text-center">{{ racer.name }}</td>
                <td class="py-2 px-4 text-center">{{ racer.country }}</td>
            </tr>
        </tbody>
    </table>
</div>

   

    <!-- Table Desktop -->
    <div class="mx-52 hidden lg:block">
        <table class="min-w-full bg-cDarkBlue ">
            <thead class="border border-cBorderGrey bg-cDarkBlue">
                <tr>
                    <th class="py-2 px-4  text-center">No.</th>
                    <th class="py-2 px-4 text-center">Racer</th>
                    <th class="py-2 px-4  text-center">Country</th>
                    <th class="py-2 px-4 text-center">Last Competed</th>
                    <th class="py-2 px-4 text-center">Profile</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let racer of racers; let i = index"  [ngClass]="{'bg-gray-800': i % 2 === 1}">
                    <td class="py-2 px-4 text-center">{{ i + 1 }}</td>
                    <td class="py-2 px-4 text-center">{{ racer.name }}</td>
                    <td class="py-2 px-4 text-center">{{ racer.country }}</td>
                    <td class="py-2 px-4  text-center">{{ racer.lastCompeted }}</td>
                    <td class="py-2 text-center">
                        <button class=" text-white font-bold px-8 py-1 rounded hover:bg-cBlue duration-100 transition-all ease-linear">View Profile</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
